{"version":3,"sources":["app/LocationContext.js","app/stations/direction/DirectionArrow.js","app/stations/Stations.js","app/App.js","index.js"],"names":["LocationContext","createContext","latitude","longitude","DirectionArrow","props","_useState","useState","_useState2","Object","slicedToArray","compass","setCompass","compassEnabled","useContext","CompassContext","location","compassHandler","e","compassValue","webkitCompassHeading","Math","abs","alpha","console","log","navigator","userAgent","match","window","addEventListener","style","transform","computeDirectionAngle","destinationLocation","height","react_default","a","createElement","src","className","currentLocation","northAngle","X","cos","sin","Y","atan2","PI","GOOGLE_NEARBY_API","config","GOOGLE_DISTANCE_API","Stations","_this","classCallCheck","this","_super","call","state","stations","stationName","_step","_iterator","createForOfIteratorHelper","s","n","done","value","err","f","response","_step2","stationsCopy","slice","_iterator2","element","length","isStationInList","push","name","id","types","setState","_this2","undefined","context","params","URLSearchParams","rankby","type","fetch","method","then","json","data","updateStationsFromResponse","reloadStationsList","Stack","Stations_StationsList","Paper","variant","elevation","React","Component","contextType","StationsList","_super2","map","Stations_Station","key","station","spacing","getStations","Station","_this3","_super3","distance","duration","requestDistanceAPI","includes","firstElement","newState","_this4","destinations","origins","mode","handleDistanceResponse","destination_place_id","destination","travelmode","stationLocation","href","getStationLink","Box","sx","width","fontFamily","fontWeight","fontSize","padding","borderRadius","isTrainStation","isBusStation","DirectionArrow_DirectionArrow","App","setLatitude","_useState3","_useState4","setLongitude","_useState5","_useState6","setCompassEnabled","isIOS","geolocation","getCurrentPosition","position","coords","alert","AppBar","color","Button","onClick","DeviceOrientationEvent","requestPermission","catch","Provider","app_stations_Stations","title","require","ReactDOM","render","src_app_App","document","getElementById"],"mappings":"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","file":"static/js/main.05ef6e34.chunk.js","sourcesContent":["import { createContext } from \"react\"\n\nexport const LocationContext = createContext({latitude: null, longitude: null})","import React, { useContext, useState } from \"react\"\nimport { CompassContext } from \"../../App\"\nimport \"./DirectionArrow.css\"\nimport { LocationContext } from \"../../LocationContext\"\n\nfunction DirectionArrowIcon(props) {\n    return <img src=\"down-arrow.png\" style={{transform: props.transform}}></img>\n}\n\nexport function DirectionArrow(props) {\n\n    var [compass, setCompass] = useState(null)\n    const compassEnabled = useContext(CompassContext)\n    const location = useContext(LocationContext)\n\n    var startCompass = () => {\n        const isIOS = (\n            navigator.userAgent.match(/(iPod|iPhone|iPad)/) &&\n            navigator.userAgent.match(/AppleWebKit/)\n        );\n    \n        if (isIOS) {\n            window.addEventListener(\"deviceorientation\", compassHandler, true);       \n        } else {\n            window.addEventListener(\"deviceorientationabsolute\", compassHandler, true);\n        }\n    }\n\n    var compassHandler = (e) => {\n        let compassValue = e.webkitCompassHeading || Math.abs(e.alpha - 360);\n        console.log(compassValue)\n        setCompass(compassValue)\n    }\n\n    if (compassEnabled) {\n        startCompass()\n    }\n\n\n    var style = {\n        transform: \"rotate(\" + (computeDirectionAngle(location, props.destinationLocation, compass) + 180) + \"deg)\",\n        height: \"2.5em\"\n    }\n\n    return <div>\n        {\n            compassEnabled &&\n            <img src=\"down-arrow.png\" className=\"compass-arrow\" style={style}></img>\n        }\n    </div>\n}\n\nfunction computeDirectionAngle(currentLocation, destinationLocation, northAngle) {\n    const X = Math.cos(destinationLocation.latitude) * Math.sin(destinationLocation.longitude - currentLocation.longitude);\n    const Y = Math.cos(currentLocation.latitude) * Math.sin(destinationLocation.latitude) - Math.sin(currentLocation.latitude) * Math.cos(destinationLocation.latitude) * Math.cos(destinationLocation.longitude - currentLocation.longitude);\n\n    const beta = Math.atan2(X,Y)\n    const angle = beta * 180 / Math.PI\n    return angle - northAngle;\n}","import React from 'react'\nimport { Paper, Stack, Box} from '@mui/material';\nimport { LocationContext } from '../LocationContext';\nimport { DirectionArrow } from './direction/DirectionArrow';\n\nimport config from \"../../config.json\";\n\nimport \"./Stations.css\"\n\nconst GOOGLE_NEARBY_API = config.GOOGLE_NEARBY_API;\nconst GOOGLE_DISTANCE_API = config.GOOGLE_DISTANCE_API;\n\nconst MAX_STATION_AMOUNT = 10;\n\nclass Stations extends React.Component {\n\n    static contextType = LocationContext;\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            stations: []\n        }\n    }\n\n    isStationInList(stations, stationName) {\n        for (const station of stations) {\n            if (station[\"name\"] === stationName)\n                return true;\n        }\n        return false;\n    }\n\n    updateStationsFromResponse(response) {\n        var stationsCopy = this.state.stations.slice()\n\n        for (const element of response['results']) {\n            if (stationsCopy.length >= MAX_STATION_AMOUNT)\n                break\n\n            if (!this.isStationInList(stationsCopy, element[\"name\"])){\n                stationsCopy.push(\n                    {\n                        \"name\": element[\"name\"],\n                        \"id\": element[\"place_id\"],\n                        \"latitude\": element[\"geometry\"][\"location\"][\"lat\"],\n                        \"longitude\": element[\"geometry\"][\"location\"][\"lng\"],\n                        \"types\": element[\"types\"],\n                    }\n                )\n            }\n        }\n\n        this.setState({stations: stationsCopy})\n    }\n\n    reloadStationsList() {\n        if (this.context == undefined || !this.context.latitude == undefined || !this.context.longitude == undefined) return\n\n        var params = new URLSearchParams({\n            location: this.context.latitude + \",\" + this.context.longitude,\n            rankby: \"distance\",\n            type: \"train_station\"\n        })\n        const apiRequest = GOOGLE_NEARBY_API + \"?\" + params\n\n        fetch(\n            apiRequest, \n            {\n                method: 'GET',\n                // headers: {'Content-Type':'application/json'},\n            }\n        )\n        .then(response => response.json())\n        .then(data => this.updateStationsFromResponse(data))\n    }\n\n    componentDidMount() {\n        this.reloadStationsList()\n    }\n\n    render() {\n        var location = this.context\n\n        return <Stack>\n                    <StationsList stations={this.state.stations}></StationsList>\n                    <Paper variant=\"elevation\" elevation={2} className=\"location-block\">\n                        <div>\n                            Current location: {location.latitude} {location.longitude}\n                        </div>\n                    </Paper>\n                </Stack>;\n    }\n}\n\n\nexport default Stations;\n\nclass StationsList extends React.Component {\n    \n\n    constructor(props) {\n        super(props)\n    }\n\n    getStations() {\n        return this.props.stations.map(element => {\n            return <Station\n                name={element[\"name\"]} key={element[\"id\"]} \n                station={element}>\n            </Station>\n        })\n    };\n\n    render() {\n        return <div className=\"stations-container\"\n            spacing={2}>\n                {this.getStations()}\n            </div>;\n    }\n}\n\nclass Station extends React.Component {\n        static contextType = LocationContext;\n\n        constructor(props) {\n            super(props)\n            this.state = {\n                distance: \"\",\n                duration: \"\",\n            }\n            this.requestDistanceAPI()\n        }\n    \n        isBusStation() {\n            return this.props.station[\"types\"].includes(\"bus_station\")\n        }\n    \n        isTrainStation() {\n            return this.props.station[\"types\"].includes(\"train_station\")\n        }\n    \n        handleDistanceResponse(response) {\n            if (response[\"rows\"].length === 0 || response[\"rows\"][0][\"elements\"].length === 0) {\n                return\n            }\n    \n            var firstElement = response[\"rows\"][0][\"elements\"][0]\n    \n            var newState = {\n                distance: firstElement[\"distance\"][\"text\"],\n                duration: firstElement[\"duration\"][\"text\"]\n            }\n    \n            this.setState(newState);\n        }\n    \n        requestDistanceAPI() {\n            if (!this.context) return\n\n            var location = this.context\n\n            var params = new URLSearchParams({\n                destinations: \"place_id:\" + this.props.station[\"id\"],\n                origins: location.latitude + \", \" + location.longitude,\n                mode: \"walking\"\n            })\n            const apiRequest = GOOGLE_DISTANCE_API + \"?\" + params\n\n            fetch(apiRequest)\n            .then(response => response.json())\n            .then(data => this.handleDistanceResponse(data))\n        }\n\n        componentDidMount() {\n            this.requestDistanceAPI()\n        }\n\n        getStationLink() {\n            var location = this.context\n\n            var params = new URLSearchParams({\n                destination_place_id: this.props.station[\"id\"],\n                destination: this.props.name,\n                origins: location.latitude + \",\" + location.longitude,\n                travelmode: \"walking\"\n            })\n\n            return \"https://www.google.com/maps/dir/?api=1&\" + params;\n\n        }\n    \n        render() {\n            const stationLocation = {\n                latitude: this.props.station.latitude,\n                longitude: this.props.station.longitude\n            }\n            return  <a href={this.getStationLink()} className=\"station\">\n                        <Paper variant=\"elevation\" elevation={4}>\n                            <Box sx={{width: 350, fontFamily: \"Jetbrains Mono, monospace\", fontWeight: 600, fontSize: \"1.2em\", padding: \"10px 10px\", borderRadius: \"10px\"}}>\n                                <div className=\"station-box\">\n                                    <div>\n                                        <div>\n                                            {\n                                                this.isTrainStation() &&\n                                                <img className=\"transport-icon\" src={\"/train-public-transport.png\"} />\n                                            }\n                                            {\n                                                this.isBusStation() &&\n                                                <img className=\"transport-icon\" src={\"/bus-public-transport.png\"} />\n                                            }\n                                        </div>\n                                        <div>{this.props.name}</div>\n                                        <div className=\"station-info\">\n                                            <div>{this.state.distance}</div>\n                                            <div>{this.state.duration}</div>\n                                        </div>\n                                    </div>\n                                    <div className=\"direction-arrow-box\">\n                                        <DirectionArrow destinationLocation={stationLocation}></DirectionArrow>\n                                    </div>\n                                </div>\n                            </Box>\n                        </Paper>\n                    </a>\n        }\n    }","import './App.css';\nimport Stations from \"./stations/Stations\"\nimport React, { createContext, useState } from 'react';\nimport { AppBar, Button } from '@mui/material';\nimport { LocationContext } from './LocationContext';\n\nexport const CompassContext = createContext(null) \n\nconst App = () => {\n\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n\n  const [compassEnabled, setCompassEnabled] = useState(false);\n\n  const isIOS = (\n    navigator.userAgent.match(/(iPod|iPhone|iPad)/) &&\n    navigator.userAgent.match(/AppleWebKit/)\n  );\n\n  if(navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n      setLatitude(position.coords.latitude)\n      setLongitude(position.coords.longitude)\n    })\n  } else {\n    alert(\"Sorry, your browser does not support HTML5 geolocation.\");\n  }\n\n  var requestCompassPermission = () => {\n    if (isIOS) {\n      DeviceOrientationEvent.requestPermission()\n      .then((response) => {\n        if (response === \"granted\") {\n          setCompassEnabled(true);\n        } else {\n          setCompassEnabled(false);\n          alert(\"Compass has to be allowed!\");\n        }\n      })\n      .catch((e) => {\n        alert(e);\n        setCompassEnabled(false)\n      });\n    } else {\n      setCompassEnabled(true);\n    }\n  }\n\n  return (\n    <div>\n      <header>\n        <AppBar className='App-header' position=\"static\" color=\"default\" variant=\"elevation\">\n          <img className='bar-logo' src='/icon.png'></img>\n          <span>City Navigator</span>\n        </AppBar>\n      </header>\n      <main>\n        {\n          isIOS && !compassEnabled &&\n          <Button variant=\"contained\" onClick={requestCompassPermission} className=\"compass-button\">Enable compass</Button>\n        }\n        <LocationContext.Provider value={{latitude: latitude, longitude: longitude}}>\n          <CompassContext.Provider value={compassEnabled}>\n            { latitude != null && longitude != null &&\n              <Stations></Stations>\n            }\n          </CompassContext.Provider>\n        </LocationContext.Provider>\n      </main>\n      <footer><a href=\"https://www.flaticon.com/free-icons/\" title=\"icons\">Icons created by Google - Flaticon</a></footer>\n    </div>\n  );\n}\n  \n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/App'\nimport './index.css';\n\nrequire('dotenv').config()\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}