{"version":3,"sources":["app/LocationContext.js","app/stations/direction/DirectionArrow.js","app/stations/Stations.js","app/App.js","index.js"],"names":["LocationContext","createContext","latitude","longitude","DirectionArrow","props","_useState","useState","_useState2","Object","slicedToArray","compass","setCompass","compassEnabled","useContext","CompassContext","location","compassHandler","e","compassValue","webkitCompassHeading","Math","abs","alpha","console","log","navigator","userAgent","match","window","addEventListener","style","transform","computeDirectionAngle","destinationLocation","height","react_default","a","createElement","src","className","currentLocation","northAngle","X","cos","sin","Y","atan2","Stations","_this","classCallCheck","this","_super","call","state","stations","stationName","_step","_iterator","createForOfIteratorHelper","s","n","done","value","err","f","response","_step2","stationsCopy","slice","_iterator2","element","length","isStationInList","push","name","id","types","setState","_this2","undefined","context","params","URLSearchParams","key","process","rankby","type","fetch","concat","method","headers","Content-Type","then","json","data","updateStationsFromResponse","reloadStationsList","Stations_StationsList","React","Component","contextType","StationsList","_super2","map","Stations_Station","station","Stack","direction","justifyContent","alignItems","spacing","getStations","Station","_this3","_super3","distance","duration","requestDistanceAPI","includes","firstElement","newState","_this4","destinations","origins","mode","handleDistanceResponse","stationLocation","Paper","variant","elevation","Box","sx","width","fontFamily","fontWeight","fontSize","padding","borderRadius","isTrainStation","isBusStation","DirectionArrow_DirectionArrow","App","setLatitude","_useState3","_useState4","setLongitude","_useState5","_useState6","setCompassEnabled","isIOS","geolocation","getCurrentPosition","position","coords","alert","AppBar","color","Button","onClick","DeviceOrientationEvent","requestPermission","catch","Provider","app_stations_Stations","href","title","require","config","ReactDOM","render","src_app_App","document","getElementById"],"mappings":"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","file":"static/js/main.f70f402b.chunk.js","sourcesContent":["import { createContext } from \"react\"\r\n\r\nexport const LocationContext = createContext({latitude: null, longitude: null})","import React, { useContext, useState } from \"react\"\r\nimport { CompassContext } from \"../../App\"\r\nimport \"./DirectionArrow.css\"\r\nimport { LocationContext } from \"../../LocationContext\"\r\n\r\nfunction DirectionArrowIcon(props) {\r\n    return <img src=\"down-arrow.png\" style={{transform: props.transform}}></img>\r\n}\r\n\r\nexport function DirectionArrow(props) {\r\n\r\n    var [compass, setCompass] = useState(null)\r\n    const compassEnabled = useContext(CompassContext)\r\n    const location = useContext(LocationContext)\r\n\r\n    var startCompass = () => {\r\n        // setStarted(true)\r\n        const isIOS = (\r\n            navigator.userAgent.match(/(iPod|iPhone|iPad)/) &&\r\n            navigator.userAgent.match(/AppleWebKit/)\r\n        );\r\n    \r\n        if (isIOS) {\r\n            window.addEventListener(\"deviceorientation\", compassHandler, true);       \r\n        } else {\r\n            window.addEventListener(\"deviceorientationabsolute\", compassHandler, true);\r\n        }\r\n    }\r\n\r\n    var compassHandler = (e) => {\r\n        let compassValue = e.webkitCompassHeading || Math.abs(e.alpha - 360);\r\n        console.log(compassValue)\r\n        setCompass(compassValue)\r\n    }\r\n\r\n    if (compassEnabled) {\r\n        startCompass()\r\n    }\r\n\r\n\r\n    var style = {\r\n        transform: \"translate(-50%, -50%) rotate(-\" + computeDirectionAngle(location, props.destinationLocation, compass) + \"deg)\",\r\n        height: \"2.5em\"\r\n    }\r\n\r\n    return <div>\r\n        {\r\n            compassEnabled &&\r\n            <img src=\"down-arrow.png\" className=\"compass-arrow\" style={style}></img>\r\n        }\r\n        {/* {\r\n            !compassEnabled && \r\n            <img src=\"down-arrow.png\" className=\"compass-arrow\"></img>\r\n        } */}\r\n    </div>\r\n}\r\n\r\nfunction computeDirectionAngle(currentLocation, destinationLocation, northAngle) {\r\n    const X = Math.cos(destinationLocation.latitude) * Math.sin(destinationLocation.longitude - currentLocation.longitude);\r\n    const Y = Math.cos(currentLocation.latitude) * Math.sin(destinationLocation.latitude) - Math.sin(currentLocation.latitude) * Math.cos(destinationLocation.latitude) * Math.cos(destinationLocation.longitude - currentLocation.longitude);\r\n\r\n    const beta = Math.atan2(X,Y)\r\n    return northAngle + beta;\r\n}","import { Paper, Stack } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport React, { useContext } from 'react'\r\nimport { LocationContext } from '../LocationContext';\r\nimport { DirectionArrow } from './direction/DirectionArrow';\r\nimport \"./Stations.css\"\r\n\r\nlet googleNearbyAPI = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json?\";\r\nconst googleDistanceAPI = \"https://maps.googleapis.com/maps/api/distancematrix/json?\"\r\n\r\nconst MAX_STATION_AMOUNT = 10;\r\n\r\nclass Stations extends React.Component {\r\n\r\n    static contextType = LocationContext;\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            stations: []\r\n        }\r\n    }\r\n\r\n    isStationInList(stations, stationName) {\r\n        for (const station of stations) {\r\n            if (station[\"name\"] === stationName)\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    updateStationsFromResponse(response) {\r\n        var stationsCopy = this.state.stations.slice()\r\n\r\n        for (const element of response['results']) {\r\n            if (stationsCopy.length >= MAX_STATION_AMOUNT)\r\n                break\r\n\r\n            if (!this.isStationInList(stationsCopy, element[\"name\"])){\r\n                stationsCopy.push(\r\n                    {\r\n                        \"name\": element[\"name\"],\r\n                        \"id\": element[\"place_id\"],\r\n                        \"latitude\": element[\"geometry\"][\"location\"][\"lat\"],\r\n                        \"longitude\": element[\"geometry\"][\"location\"][\"lng\"],\r\n                        \"types\": element[\"types\"],\r\n                    }\r\n                )\r\n            }\r\n        }\r\n\r\n        this.setState({stations: stationsCopy})\r\n    }\r\n\r\n    reloadStationsList() {\r\n        if (this.context == undefined || !this.context.latitude == undefined || !this.context.longitude == undefined) return\r\n\r\n        var params = new URLSearchParams({\r\n            key: process.env.REACT_APP_GOOGLE_API_KEY,\r\n            location: this.context.latitude + \", \" + this.context.longitude,\r\n            rankby: \"distance\",\r\n            type: \"train_station\"\r\n        })\r\n        const apiRequest = googleNearbyAPI + params\r\n\r\n        fetch(\r\n            process.env.REACT_APP_CORS_PROXY_URL.concat(apiRequest), \r\n            {\r\n                method: 'GET',\r\n                headers: {'Content-Type':'application/json'},\r\n            }\r\n        )\r\n        .then(response => response.json())\r\n        .then(data => this.updateStationsFromResponse(data))\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.reloadStationsList()\r\n    }\r\n\r\n    render() {\r\n        var location = this.context\r\n\r\n        return <div>\r\n                    <div>Current location: {location.latitude} {location.longitude}</div>\r\n                    <StationsList stations={this.state.stations}></StationsList>\r\n                </div>;\r\n    }\r\n}\r\n\r\n\r\nexport default Stations;\r\n\r\nclass StationsList extends React.Component {\r\n    \r\n\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    getStations() {\r\n        var location = this.context\r\n\r\n        return this.props.stations.map(element => {\r\n            return <Station \r\n                name={element[\"name\"]} key={element[\"id\"]} \r\n                station={element}>\r\n            </Station>\r\n        })\r\n    };\r\n\r\n    render() {\r\n        return <Stack\r\n            direction=\"column\"\r\n            justifyContent=\"flex-start\"\r\n            alignItems=\"center\"\r\n            spacing={2}>\r\n                {this.getStations()}\r\n            </Stack>;\r\n    }\r\n}\r\n\r\nclass Station extends React.Component {\r\n        static contextType = LocationContext;\r\n\r\n        constructor(props) {\r\n            super(props)\r\n            this.state = {\r\n                distance: \"\",\r\n                duration: \"\",\r\n            }\r\n            this.requestDistanceAPI()\r\n        }\r\n    \r\n        isBusStation() {\r\n            return this.props.station[\"types\"].includes(\"bus_station\")\r\n        }\r\n    \r\n        isTrainStation() {\r\n            return this.props.station[\"types\"].includes(\"train_station\")\r\n        }\r\n    \r\n        handleDistanceResponse(response) {\r\n            if (response[\"rows\"].length === 0 || response[\"rows\"][0][\"elements\"].length === 0) {\r\n                return\r\n            }\r\n    \r\n            var firstElement = response[\"rows\"][0][\"elements\"][0]\r\n    \r\n            var newState = {\r\n                distance: firstElement[\"distance\"][\"text\"],\r\n                duration: firstElement[\"duration\"][\"text\"]\r\n            }\r\n    \r\n            this.setState(newState);\r\n        }\r\n    \r\n        requestDistanceAPI() {\r\n            if (!this.context) return\r\n\r\n            var location = this.context\r\n\r\n            var params = new URLSearchParams({\r\n                key: process.env.REACT_APP_GOOGLE_API_KEY,\r\n                destinations: \"place_id:\" + this.props.station[\"id\"],\r\n                origins: location.latitude + \", \" + location.longitude,\r\n                mode: \"walking\"\r\n            })\r\n            const apiRequest = googleDistanceAPI + params\r\n\r\n            fetch(process.env.REACT_APP_CORS_PROXY_URL.concat(apiRequest))\r\n            .then(response => response.json())\r\n            .then(data => this.handleDistanceResponse(data))\r\n        }\r\n\r\n        componentDidMount() {\r\n            this.requestDistanceAPI()\r\n        }\r\n    \r\n        render() {\r\n            const stationLocation = {\r\n                latitude: this.props.station.latitude,\r\n                longitude: this.props.station.longitude\r\n            }\r\n            return  <Paper variant=\"elevation\" elevation={4}>\r\n                        <Box sx={{width: 350, height: 100, fontFamily: \"Jetbrains Mono, monospace\", fontWeight: 600, fontSize: \"1.2em\", padding: \"10px\", borderRadius: \"10px\"}}>\r\n                            <div className=\"station-box\">\r\n                                <div>\r\n                                    <div>\r\n                                        {\r\n                                            this.isTrainStation() &&\r\n                                            <img className=\"transport-icon\" src={\"/train-public-transport.png\"} />\r\n                                        }\r\n                                        {\r\n                                            this.isBusStation() &&\r\n                                            <img className=\"transport-icon\" src={\"/bus-public-transport.png\"} />\r\n                                        }\r\n                                    </div>\r\n                                    <div>{this.props.name}</div>\r\n                                    <div className=\"station-info\">\r\n                                        <div>{this.state.distance}</div>\r\n                                        <div>{this.state.duration}</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"direction-arrow-box\">\r\n                                    <DirectionArrow destinationLocation={stationLocation}></DirectionArrow>\r\n                                </div>\r\n                            </div>\r\n                        </Box>\r\n                    </Paper>\r\n        }\r\n    }\r\n\r\n\r\n// function getLocation(setLatitude, setLongitude) {\r\n//     if(navigator.geolocation) {\r\n//         navigator.geolocation.getCurrentPosition(function(position) {\r\n//           setLatitude(position.coords.latitude)\r\n//           setLongitude(position.coords.longitude)\r\n//         })\r\n//     } else {\r\n//         alert(\"Sorry, your browser does not support HTML5 geolocation.\");\r\n//     }\r\n// }\r\n\r\n","import './App.css';\nimport Stations from \"./stations/Stations\"\nimport React, { createContext, useState } from 'react';\nimport { AppBar, Button } from '@mui/material';\nimport { LocationContext } from './LocationContext';\n\nexport const CompassContext = createContext(null) \n\nconst App = () => {\n\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n\n  const [compassEnabled, setCompassEnabled] = useState(false);\n\n  const isIOS = (\n    navigator.userAgent.match(/(iPod|iPhone|iPad)/) &&\n    navigator.userAgent.match(/AppleWebKit/)\n  );\n\n  if(navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n      setLatitude(position.coords.latitude)\n      setLongitude(position.coords.longitude)\n    })\n  } else {\n    alert(\"Sorry, your browser does not support HTML5 geolocation.\");\n  }\n\n  var requestCompassPermission = () => {\n    DeviceOrientationEvent.requestPermission()\n    .then((response) => {\n      if (response === \"granted\") {\n        setCompassEnabled(true);\n      } else {\n        setCompassEnabled(false);\n        alert(\"Compass has to be allowed!\");\n      }\n    })\n    .catch((e) => {\n      alert(e); //TODO: Remove\n      setCompassEnabled(false)\n    });\n  }\n\n  return (\n    <div>\n      <header>\n        <AppBar className='App-header' position=\"static\" color=\"default\" variant=\"elevation\">\n          <img className='bar-logo' src='/icon.png'></img>\n          <span>City Navigator</span>\n        </AppBar>\n      </header>\n      <main>\n        {\n          isIOS && !compassEnabled &&\n          <Button variant=\"contained\" onClick={requestCompassPermission}>Enable compass</Button>\n        }\n        <LocationContext.Provider value={{latitude: latitude, longitude: longitude}}>\n          <CompassContext.Provider value={compassEnabled}>\n            { latitude != null && longitude != null &&\n              <Stations></Stations>\n            }\n          </CompassContext.Provider>\n        </LocationContext.Provider>\n      </main>\n      <footer><a href=\"https://www.flaticon.com/free-icons/\" title=\"icons\">Icons created by Google - Flaticon</a></footer>\n    </div>\n  );\n}\n  \n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/App'\nimport './index.css';\n\nrequire('dotenv').config()\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}